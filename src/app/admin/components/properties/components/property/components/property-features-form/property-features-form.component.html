<div class="rd-container">
  <form
    class="rd-form form-container"
    [formGroup]="propertyFeaturesForm"
    (ngSubmit)="onSubmit()"
  >
    <div class="rd-form-header">Features/ Amenities</div>
    <div class="rd-form-section" formArrayName="FeaturesAmenitiesSectorId">
      <div
        *ngFor="
          let feature of propertyFeaturesAmenitiesForm.controls;
          let i = index
        "
        [formGroupName]="i"
      >
        <div class="rd-switch-wrapper">
          <rd-switch
            [label]="mergedFeaturesAmenitiesList[i].Title"
            [id]="'feature-' + i"
            [checked]="mergedFeaturesAmenitiesList[i].Checked"
            (onChange)="toggleSwitch($event, i)"
          ></rd-switch>
          <label [for]="'feature-' + i">{{
            mergedFeaturesAmenitiesList[i].Title
          }}</label>
        </div>
        <div [ngSwitch]="propertyFeaturesAmenitiesForm.at(i).value.Title">
          <div *ngSwitchCase="'Sprinklers'">
            <rd-select
              *ngIf="propertyFeaturesAmenitiesForm.at(i).value.Checked"
              [id]="'feature-desc-' + i"
              [label]="'Sprinkler Spec'"
              [placeholder]="'Please Select'"
              [bindLabel]="'Name'"
              [bindValue]="'Name'"
              [items$]="sprinklerSpecs$"
              [controlName]="'Spec'"
              [form]="propertyFeaturesAmenitiesForm.at(i)"
              (onChange)="
                sprinklerSpecChange($event, propertyFeaturesAmenitiesForm.at(i))
              "
            ></rd-select
            ><rd-input
              *ngIf="
                sprinklerSpecId == 3 &&
                propertyFeaturesAmenitiesForm.at(i).value.Checked
              "
              [label]="'Description'"
              [id]="'feature-desc-' + i"
              [placeholder]="'Please Provide'"
              [type]="'text'"
              [controlName]="'Value'"
              [form]="propertyFeaturesAmenitiesForm.at(i)"
              (onChange)="onChange($event)"
            ></rd-input>
          </div>

          <div *ngSwitchCase="'Standby water'">
            <rd-select
              *ngIf="propertyFeaturesAmenitiesForm.at(i).value.Checked"
              [id]="'feature-desc-' + i"
              [label]="'Choose Option'"
              [placeholder]="'Please Select'"
              [bindLabel]="'Name'"
              [bindValue]="'Name'"
              [items$]="standByWaters$"
              [controlName]="'Stand'"
              [clear]="true"
              [form]="propertyFeaturesAmenitiesForm.at(i)"
              (onChange)="
                standByWaterChange($event, propertyFeaturesAmenitiesForm.at(i))
              "
            ></rd-select>
          </div>

          <div *ngSwitchCase="'Backup generator'">
            <rd-select
              *ngIf="propertyFeaturesAmenitiesForm.at(i).value.Checked"
              [id]="'feature-desc-' + i"
              [label]="'Choose Option'"
              [placeholder]="'Please Select'"
              [bindLabel]="'Name'"
              [bindValue]="'Name'"
              [items$]="backUpGenerator$"
              [controlName]="'BackUp'"
              [clear]="true"
              [form]="propertyFeaturesAmenitiesForm.at(i)"
              (onChange)="
                backUpChange($event, propertyFeaturesAmenitiesForm.at(i))
              "
            ></rd-select>
          </div>

          <div *ngSwitchCase="'Weigh bridge'">
            <ng-container
              *ngIf="propertyFeaturesAmenitiesForm.at(i).value.Checked"
            >
              <div class="rd-heading rd-heading-xs">
                Please Select Availability
                <label>
                  <span class="required-asterik">*</span>
                </label>
              </div>
              <div class="radio-input-group">
                <div class="radio-input">
                  <input
                    type="radio"
                    id="feature-availabilty-yes"
                    [value]="'Yes'"
                    formControlName="Value"
                  />
                  <label for="feature-availabilty-no">Yes</label>
                </div>
                <div class="radio-input">
                  <input
                    type="radio"
                    id="feature-availabilty-no"
                    [value]="'No'"
                    formControlName="Value"
                  />
                  <label for="feature-availabilty-no">No</label>
                </div>
              </div>
              <!-- <div *ngIf="visibility?.hasError('invalid')" class="error-msg">
                <small>{{ visibility.errors?.['invalid'] }}</small>
              </div> -->
            </ng-container>
          </div>
          <div *ngSwitchCase="'Outside gantries'">
            <ng-container
              *ngIf="propertyFeaturesAmenitiesForm.at(i).value.Checked"
            >
              <div class="rd-heading rd-heading-xs">
                Please select Availability
                <label>
                  <span class="required-asterik">*</span>
                </label>
              </div>
              <div class="radio-input-group">
                <div class="radio-input">
                  <input
                    type="radio"
                    id="feature-availabilty-yes"
                    [value]="'Yes'"
                    formControlName="Value"
                  />
                  <label for="feature-availabilty-no">Yes</label>
                </div>
                <div class="radio-input">
                  <input
                    type="radio"
                    id="feature-availabilty-no"
                    [value]="'No'"
                    formControlName="Value"
                  />
                  <label for="feature-availabilty-no">No</label>
                </div>
              </div>
              <!-- <div *ngIf="visibility?.hasError('invalid')" class="error-msg">
                <small>{{ visibility.errors?.['invalid'] }}</small>
              </div> -->
            </ng-container>
          </div>
          <div *ngSwitchCase="'Pit'">
            <ng-container
              *ngIf="propertyFeaturesAmenitiesForm.at(i).value.Checked"
            >
              <div class="rd-heading rd-heading-xs">
                Please select Availability
                <label>
                  <span class="required-asterik">*</span>
                </label>
              </div>
              <div class="radio-input-group">
                <div class="radio-input">
                  <input
                    type="radio"
                    id="feature-availabilty-yes"
                    [value]="'Yes'"
                    formControlName="Value"
                  />
                  <label for="feature-availabilty-no">Yes</label>
                </div>
                <div class="radio-input">
                  <input
                    type="radio"
                    id="feature-availabilty-no"
                    [value]="'No'"
                    formControlName="Value"
                  />
                  <label for="feature-availabilty-no">No</label>
                </div>
              </div>
              <!-- <div *ngIf="visibility?.hasError('invalid')" class="error-msg">
                <small>{{ visibility.errors?.['invalid'] }}</small>
              </div> -->
            </ng-container>
          </div>
          <div *ngSwitchCase="'Security'">
            <ng-container
              *ngIf="propertyFeaturesAmenitiesForm.at(i).value.Checked"
            >
              <div class="rd-heading rd-heading-xs">
                Please select Availability
                <label>
                  <span class="required-asterik">*</span>
                </label>
              </div>
              <div class="radio-input-group">
                <div class="radio-input">
                  <input
                    type="radio"
                    id="feature-availabilty-yes"
                    [value]="'Yes'"
                    formControlName="Value"
                  />
                  <label for="feature-availabilty-no">Yes</label>
                </div>
                <div class="radio-input">
                  <input
                    type="radio"
                    id="feature-availabilty-no"
                    [value]="'No'"
                    formControlName="Value"
                  />
                  <label for="feature-availabilty-no">No</label>
                </div>
              </div>
              <!-- <div *ngIf="visibility?.hasError('invalid')" class="error-msg">
                <small>{{ visibility.errors?.['invalid'] }}</small>
              </div> -->
            </ng-container>
          </div>
          <div *ngSwitchDefault>
            <rd-input
              *ngIf="propertyFeaturesAmenitiesForm.at(i).value.Checked"
              [label]="'Description'"
              [id]="'feature-desc-' + i"
              [placeholder]="'Please Provide'"
              [type]="'text'"
              [controlName]="'Value'"
              [form]="propertyFeaturesAmenitiesForm.at(i)"
              (onChange)="onChange($event)"
            ></rd-input>
          </div>
        </div>
      </div>
    </div>

    <div class="rd-form-header">Additional Details</div>
    <div>
      <!-- <rd-textarea
        [label]="'Additional Information'"
        [id]="'Description'"
        [placeholder]="'Add Description'"
        [controlName]="'FeatureAmenitiesAddtionalDetails'"
        [form]="propertyFeaturesForm"
      ></rd-textarea> -->

      <rd-editor
        [label]="'Additional Information'"
        [id]="'Description'"
        [placeholder]="'Add Description'"
        [controlName]="'FeatureAmenitiesAddtionalDetails'"
        [form]="propertyFeaturesForm"
        (onChange)="onChange($event)"
      ></rd-editor>
    </div>

    <div class="rd-form-footer">
      <div>
        <button
          type="button"
          class="rd-btn-secondary rd-btn-lg"
          (click)="changeStep(route.PROPERTY_CONTACT_DETAILS)"
        >
          Previous
        </button>
      </div>
      <div>
        <button type="submit" class="rd-btn-primary rd-btn-lg">Save</button>
      </div>
    </div>
  </form>
</div>
