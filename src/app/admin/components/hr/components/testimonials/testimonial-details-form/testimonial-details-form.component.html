<div class="rd-container" *ngIf="formConfig">
  <div class="rd-container-header">
    <div class="rd-container-header-left">
      <div>
        <button
          type="button"
          id="back"
          class="rd-btn-text rd-btn-back rd-btn-lg"
          (click)="goToManage()"
        >
          <span><img src="assets/images/arrow-left.svg" alt="" /></span>
          <span>BACK</span>
        </button>
      </div>
      <div class="rd-heading rd-heading-lg">
        {{ formConfig ? (formConfig.mode | titlecase) : "" }} Testimonial
      </div>
    </div>
  </div>
  <form
    *ngIf="formConfig.mode == formMode.CREATE"
    [formGroup]="testimonialForm"
    (ngSubmit)="onSubmit($event)"
    class="rd-form"
    autocomplete="on"
  >
    <div class="rd-form-header">Testimonial Details</div>

    <div class="rd-form-body">
      <div class="row">
        <div class="col-md-6">
          <rd-select
            [id]="'type'"
            [label]="'Testimonial Type'"
            [placeholder]="'Please Select'"
            [bindLabel]="'label'"
            [bindValue]="'id'"
            [required]="true"
            [items$]="type$"
            [form]="testimonialForm"
            [controlName]="'Type'"
            (onChange)="typeSelect($event)"
          ></rd-select>
        </div>
        <div class="col-md-6">
          <rd-input
            [label]="'Name of Reviewer '"
            [id]="'add-name'"
            [placeholder]="'Please Provide'"
            [required]="true"
            [type]="'text'"
            [controlName]="'ReviewerName'"
            [form]="testimonialForm"
            (onChange)="onChange($event)"
          >
          </rd-input>
        </div>
      </div>

      <ng-container *ngIf="testimonialForm.get('Type')?.value === 1">
        <rd-input
          [label]="'Job Title'"
          [id]="'add-title'"
          [placeholder]="'Please Provide'"
          [required]="true"
          [type]="'text'"
          [controlName]="'JobTitle'"
          [form]="testimonialForm"
          (onChange)="onChange($event)"
        >
        </rd-input>
      </ng-container>

      <ng-container>
        <rd-textarea
          [label]="'Testimonial'"
          [id]="'add-testimonial'"
          [placeholder]="'Type Your Testimonial Here...'"
          [controlName]="'Testimonial'"
          [form]="testimonialForm"
          (onChange)="onChange($event)"
        >
        </rd-textarea>
      </ng-container>
    </div>

    <div class="rd-form-footer">
      <div>
        <button
          type="button"
          class="rd-btn-secondary rd-btn-lg"
          (click)="goToManage()"
        >
          Cancel
        </button>
      </div>
      <div>
        <button type="submit" class="rd-btn-primary rd-btn-lg">Submit</button>
      </div>
    </div>
  </form>
  <form
    *ngIf="formConfig.mode == formMode.EDIT"
    [formGroup]="testimonialForm"
    (ngSubmit)="onSubmit($event)"
    class="rd-form"
    autocomplete="on"
  >
    <div class="rd-form-header">Testimonial Details</div>
    <div class="rd-form-body">
      <div class="row">
        <div class="col-md-6">
          <rd-select
            [id]="'type'"
            [label]="'Testimonial Type'"
            [placeholder]="'Please Select'"
            [bindLabel]="'label'"
            [bindValue]="'id'"
            [required]="true"
            [items$]="type$"
            [form]="testimonialForm"
            [controlName]="'Type'"
            (onChange)="typeSelect($event)"
          ></rd-select>
        </div>
        <div class="col-md-6">
          <rd-input
            [label]="'Name of Reviewer'"
            [id]="'add-name'"
            [placeholder]="'Please Provide'"
            [required]="true"
            [type]="'text'"
            [controlName]="'ReviewerName'"
            [form]="testimonialForm"
            (onChange)="onChange($event)"
          >
          </rd-input>
        </div>
      </div>

      <ng-container *ngIf="testimonialForm.get('Type')?.value === 1">
        <rd-input
          [label]="'Job Title'"
          [id]="'add-title'"
          [placeholder]="'Please Provide'"
          [required]="true"
          [type]="'text'"
          [controlName]="'JobTitle'"
          [form]="testimonialForm"
          (onChange)="onChange($event)"
        >
        </rd-input>
      </ng-container>

      <ng-container>
        <rd-textarea
          [label]="'Testimonial'"
          [id]="'add-testimonial'"
          [placeholder]="'Type Your Testimonial Here...'"
          [controlName]="'Testimonial'"
          [form]="testimonialForm"
          (onChange)="onChange($event)"
        >
        </rd-textarea>
      </ng-container>
    </div>

    <div class="rd-form-footer">
      <div>
        <button
          type="button"
          class="rd-btn-secondary rd-btn-lg"
          (click)="goToManage()"
        >
          Cancel
        </button>
      </div>
      <div>
        <button type="submit" class="rd-btn-primary rd-btn-lg">
          Save & Update
        </button>
      </div>
    </div>
  </form>

  <form
    *ngIf="formConfig.mode == formMode.VIEW && testimonialDetails"
    class="rd-form"
  >
    <div class="rd-form-header">Testimonial Details</div>
    <div class="attribute-container">
      <div class="attribute-item">
        <div class="attribute-label">Testimonial Type</div>
        <div class="attribute-desc">{{ testimonialDetails.TypeName }}</div>
      </div>
      <div class="attribute-item">
        <div class="attribute-label">Name of Reviewer</div>
        <div class="attribute-desc">
          {{ testimonialDetails.ReviewerName }}
        </div>
      </div>

      <ng-container *ngIf="testimonialForm.get('Type')?.value === 1">
        <div class="attribute-item">
          <div class="attribute-label">Job Title</div>
          <div class="attribute-desc">
            {{ testimonialDetails.JobTitle }}
          </div>
        </div>
      </ng-container>

      <div class="attribute-item">
        <div class="attribute-label">Testimonial</div>
        <div class="attribute-desc">
          {{ testimonialDetails.Testimonial }}
        </div>
      </div>
      <div class="attribute-item">
        <div class="attribute-label">Date Published</div>
        <div class="attribute-desc">
          {{ testimonialDetails.CreatedDate }}
        </div>
      </div>
      <div class="attribute-item"></div>
    </div>

    <div class="rd-form-footer">
      <div>
        <button
          type="button"
          class="rd-btn-secondary rd-btn-lg"
          (click)="goToManage()"
        >
          Cancel
        </button>
      </div>
      <div>
        <button
          *ngIf="formConfig?.access"
          type="submit"
          class="rd-btn-primary rd-btn-lg"
          (click)="editTestimonial()"
        >
          Edit
        </button>
      </div>
    </div>
  </form>
</div>
